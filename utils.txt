function utility for version 3